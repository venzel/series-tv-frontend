<p-toast></p-toast>

<div class="card">
    <p-toolbar styleClass="p-mb-4">
        <ng-template pTemplate="left">
            <button
                pButton
                pRipple
                icon="pi pi-check"
                class="p-button-primary"
                label="Marcar como lida"
                (click)="markWatched()"
                [disabled]="!selectedEpisodes || !selectedEpisodes.length"
            ></button>
        </ng-template>
    </p-toolbar>
    <p-table
        #dt
        [value]="episodes"
        [rows]="5"
        [paginator]="true"
        [(selection)]="selectedEpisodes"
        [rowHover]="true"
        dataKey="id"
        currentPageReportTemplate="Exibindo de {first} ate {last}"
        [showCurrentPageReport]="true"
    >
        <ng-template pTemplate="caption">
            <div class="p-d-flex p-ai-center p-jc-between">
                <h1 class="p-m-0">Episodios / Temporada / Game of Thrones</h1>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 3rem">
                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                </th>
                <th pSortableColumn="name">Nome<p-sortIcon field="episode_name"></p-sortIcon></th>
                <th pSortableColumn="time" style="text-align: center">
                    Tempo de episodio<p-sortIcon field="time"></p-sortIcon>
                </th>
                <th pSortableColumn="watched" style="text-align: center">
                    Assistido?<p-sortIcon field="watched"></p-sortIcon>
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-episode>
            <tr>
                <td>
                    <p-tableCheckbox [value]="episode"></p-tableCheckbox>
                </td>
                <td>{{ episode.name }}</td>
                <td style="text-align: center">{{ episode.time }} minutos</td>
                <td style="text-align: center">{{ episode.watched }}</td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary">
            <div class="p-d-flex p-ai-center p-jc-between">
                Total: {{ episodes ? episodes.length : 0 }} episodios
            </div>
        </ng-template>
    </p-table>
</div>
<p-confirmDialog [style]="{ width: '450px' }"></p-confirmDialog>
